<!DOCTYPE html>
<html>
<head>
  <title>Stats Joueur</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body>
  <h1>Voir les statistiques d’un joueur</h1>
  <input type="text" id="pseudo" placeholder="Entrez le pseudo" />
  <button onclick="getStats()">Voir stats</button>

  <div id="stats"></div>

  <script>
    // Ta config Firebase ici
    const firebaseConfig = {
      apiKey: "TON_API_KEY",
      authDomain: "TON_PROJET.firebaseapp.com",
      projectId: "TON_PROJET",
      storageBucket: "TON_PROJET.appspot.com",
      messagingSenderId: "TON_ID",
      appId: "TON_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function getStats() {
      const pseudo = document.getElementById('pseudo').value.trim();
      if (!pseudo) {
        alert('Merci d’entrer un pseudo');
        return;
      }

      const statsDiv = document.getElementById('stats');
      statsDiv.innerHTML = 'Chargement...';

      db.collection('utilisateurs').doc(pseudo).get()
        .then(doc => {
          if (doc.exists) {
            const data = doc.data();
            if (!data.profil) {
              statsDiv.innerHTML = 'Profil introuvable pour ce joueur.';
              return;
            }
            const profil = data.profil;

            // On affiche uniquement les infos non sensibles
            statsDiv.innerHTML = `
              <h2>Stats de ${pseudo}</h2>
              <p>Capacités : ${JSON.stringify(profil.capacites)}</p>
              <p>Items : ${JSON.stringify(profil.item_player)}</p>
              <p>Map chargée : ${profil.map_charge}</p>
              <p>Niveau : ${profil.niv}</p>
              <p>Points de compétence : ${profil.skill_points}</p>
              <p>Stat choisi : ${profil.stat_choisi}</p>
              <p>XP : ${profil.xp}</p>
            `;
          } else {
            statsDiv.innerHTML = 'Aucun joueur trouvé avec ce pseudo.';
          }
        })
        .catch(error => {
          console.error("Erreur récupération stats :", error);
          statsDiv.innerHTML = 'Erreur lors de la récupération des données.';
        });
    }
  </script>
</body>
</html>
