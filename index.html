<!DOCTYPE html>
<html>
<head>
  <title>Stats Joueur</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>
<body>
  <h1>Voir les statistiques d’un joueur</h1>
  <input type="text" id="pseudo" placeholder="Entrez le pseudo" />
  <button onclick="getStats()">Voir stats</button>

  <div id="stats"></div>

  <script>
    const firebaseConfig = {
      apiKey: "TON_API_KEY",
      authDomain: "TON_PROJET.firebaseapp.com",
      databaseURL: "https://TON_PROJET.firebaseio.com",
      projectId: "TON_PROJET",
      storageBucket: "TON_PROJET.appspot.com",
      messagingSenderId: "TON_ID",
      appId: "TON_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function getStats() {
      const pseudo = document.getElementById('pseudo').value.trim();
      if (!pseudo) {
        alert('Merci d’entrer un pseudo');
        return;
      }

      const statsDiv = document.getElementById('stats');
      statsDiv.innerHTML = 'Chargement...';

      // Chemin dans Realtime Database
      const ref = db.ref('utilisateurs/' + pseudo + '/profil');
      ref.get()
        .then(snapshot => {
          if (snapshot.exists()) {
            const profil = snapshot.val();

            statsDiv.innerHTML = `
              <h2>Stats de ${pseudo}</h2>
              <p>Capacités : ${JSON.stringify(profil.capacites)}</p>
              <p>Items : ${JSON.stringify(profil.item_player)}</p>
              <p>Map chargée : ${profil.map_charge}</p>
              <p>Niveau : ${profil.niv}</p>
              <p>Points de compétence : ${profil.skill_points}</p>
              <p>Stat choisi : ${profil.stat_choisi}</p>
              <p>XP : ${profil.xp}</p>
            `;
          } else {
            statsDiv.innerHTML = 'Aucun profil trouvé pour ce joueur.';
          }
        })
        .catch(error => {
          console.error("Erreur récupération stats :", error);
          statsDiv.innerHTML = 'Erreur lors de la récupération des données.';
        });
    }
  </script>
</body>
</html>
